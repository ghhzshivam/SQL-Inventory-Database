CREATE DATABASE INVENTORY;

USE INVENTORY; 


CREATE TABLE SUPPLIER (SID VARCHAR(5) NOT NULL , SNAME VARCHAR(30) NOT NULL, SADD VARCHAR(50) NOT NULL, SCITY CHAR(15) DEFAULT 'DELHI', 
SPHONE varchar(12) UNIQUE, SEMAIL VARCHAR(30), PRIMARY KEY (SID));
INSERT INTO SUPPLIER VALUES('S0001', 'RAJESH ELECTRONICS', 'DWARIKA, DELHI', 'DELHI', '9345293745', 'RAJESHELECTRONIC@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0002', 'PRIYAM SERVICES', 'RAJORI GARDEN, DELHI', 'DELHI', '8635695475', 'PRIYAMSERVICES@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0003', 'RATHI RETAILERS', 'LAJPAT NAGAR, DELHI', 'DELHI', '9325293745', 'RATHIRETAIL@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0004', 'GEETA LAPTOPS', 'TUGHLKABAD EXTENSION, DELHI', 'DELHI', '9644678456', 'GEETALAPTOPS@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0005', 'SENSERA ELECTYRONICS', 'PRITAM PURA, DELHI', 'DELHI', '9737578609', 'SENSERA@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0006', 'JHANVI MOBILES', 'NOIDA SECTOR - 62, UP', 'UP', '9573553225', 'JHANVIMOBIELS@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0007', 'SURESH CORP LTD', 'KASHMIRI GATE, DELHI', 'DELHI', '4593059375', 'SURESH5432@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0008', 'LAXMAN ELECTRICALS', 'NOIDA SECTOR - 24, UP', 'UP', '7684684345', 'LAXMANELECTRICALS@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0009', 'RAMBO SERVICES', 'DWARIKA, DELHI', 'DELHI', '8446347645', 'RAMOSERVICES@GMAIL.COM');
INSERT INTO SUPPLIER VALUES('S0010', 'DHWANI LAPTOPS', 'NEHRU PLACE, DELHI', 'DELHI', '5674367744', 'DHWANILAPTOPS@GMAIL.COM');

SELECT*FROM SUPPLIER;

CREATE TABLE CUST (CID VARCHAR(5) NOT NULL , CNAME VARCHAR(20) NOT NULL, CADD VARCHAR(30) NOT NULL, CCITY VARCHAR(15) , 
CPHONE char(12) UNIQUE, CEMAIL VARCHAR(30),CDOB DATE CHECK(CDOB< '1-01-2000'), PRIMARY KEY (CID));
INSERT INTO CUST VALUES('C0001', 'RAKESH', 'DWARIKA','DELHI', '9123573853', 'RAKESH@GMAIL.COM', '04-12-1995');
INSERT INTO CUST VALUES('C0002', 'RAMESH', 'PRITAM PURA','DELHI', '91354762378', 'RAMESH@GMAIL.COM', '09-02-1999');
INSERT INTO CUST VALUES('C0003', 'PRIYA', 'KASHMIRI GATE','DELHI', '9285736496', 'PRIYA@GMAIL.COM', '12-02-1985');
INSERT INTO CUST VALUES('C0004', 'PAYAL', 'SRINAGAR','UTTRAKHAND', '9375629565', 'PAYAL@GMAIL.COM', '04-09-1995');
INSERT INTO CUST VALUES('C0005', 'ROHIT', 'DWARIKA','DELHI', '9123473853', 'RAKESH@GMAIL.COM', '04-12-1995');
INSERT INTO CUST VALUES('C0006', 'ASHISH', 'NEHRU PLACE','DELHI', '9773957406', 'ASHISH@GMAIL.COM', '09-02-1999');
INSERT INTO CUST VALUES('C0007', 'PUNAM', 'LAJPAT NAGAR','DELHI', '9564896743', 'PUNAM@GMAIL.COM', '02-08-1997');
INSERT INTO CUST VALUES('C0008', 'VIVEK', 'NOIDA SECTOR -16','UP', '4768385673', 'VIVEK@GMAIL.COM', '02-12-1992');

SELECT*FROM CUST;


CREATE TABLE PRODUCT (PID VARCHAR(5), PDESC VARCHAR(100), PRICE INT CHECK(PRICE>0), CATEGORY VARCHAR(10), SID VARCHAR(05) REFERENCES SUPPLIER(SID) , PRIMARY KEY(PID))

INSERT INTO PRODUCT VALUES('P0001', 'LAPTOP DELL WINDOWS i5 8GB', 45000, 'IT', 'S0004');
INSERT INTO PRODUCT VALUES('P0002', 'BOAT HEADPHONES', 5000, 'IT', 'S0001');
INSERT INTO PRODUCT VALUES('P0004', 'XIAOMI POCCO X3', 23000, 'IT', 'S0006');
INSERT INTO PRODUCT VALUES('P0005', 'LAPTOP ASUS WINDOWS 8 GB RAM', 35000, 'IT', 'S0010');
INSERT INTO PRODUCT VALUES('P0006', 'EARPHONES JBL', 1000, 'IT', 'S0002');
INSERT INTO PRODUCT VALUES('P0007', 'LAPTOP COVER', 500, 'IT', 'S0003');
INSERT INTO PRODUCT VALUES('P0008', 'BEAT WIRELESS SPEAKER', 10000, 'IT', 'S0005');
INSERT INTO PRODUCT VALUES('P0009', 'BEAT AMPLIFIER', 5000, 'IT', 'S0005');
INSERT INTO PRODUCT VALUES('P0010', 'WIFI ROUTER 2Gbps', 2000, 'IT', 'S0009');
INSERT INTO PRODUCT VALUES('P0011', 'ETHERNET CABLES', 200, 'IT', 'S0009');
INSERT INTO PRODUCT VALUES('P0012', 'LAPTOP STAND', 500, 'IT', 'S0007');
INSERT INTO PRODUCT VALUES('P0013', 'LAPTOP CHARGER', 1500, 'IT', 'S0008');
INSERT INTO PRODUCT VALUES('P0014', 'LAPTOP BATTERY ', 1200, 'IT', 'S0008');
INSERT INTO PRODUCT VALUES('P0015', 'LAPTOP ASUS i3 WINDOWS ', 25000, 'IT', 'S0010');
INSERT INTO PRODUCT VALUES('P0016', 'LAPTOP ASUS AMD 8GB RAM', 30000, 'IT', 'S0010');

SELECT*FROM PRODUCT

--CREATE TABLE STOCK(PID VARCHAR(5) REFERENCES PRODUCT(PID), SQTY INT CHECK(SQTY>=0) , ROL INT CHECK(ROL>0) , MOQ INT CHECK(MOQ>5) )

--INSERT INTO STOCK ('P0001', )

CREATE TABLE ORDERS( OID VARCHAR(5), ODATE DATE, CID VARCHAR(5) REFERENCES CUST(CID) , PID VARCHAR(5) REFERENCES PRODUCT(PID),
 OQTY INT CHECK (OQTY>=1), PRIMARY KEY(OID));

INSERT INTO ORDERS VALUES('O0001', '08-06-2021', 'C0001', 'P0014', '5')
INSERT INTO ORDERS VALUES('O0002', '06-26-2021', 'C0002', 'P0001', '1')
INSERT INTO ORDERS VALUES('O0003', '02-07-2021', 'C0003', 'P0008', '1')
INSERT INTO ORDERS VALUES('O0004', '10-07-2021', 'C0001', 'P0007', '2')		--MM-DD-YY
INSERT INTO ORDERS VALUES('O0005', '07-15-2021', 'C0005', 'P0004', '1')
INSERT INTO ORDERS VALUES('O0006', '07-15-2021', 'C0006', 'P0016', '1')
INSERT INTO ORDERS VALUES('O0007', '07-28-2021', 'C0006', 'P0010', '1')
INSERT INTO ORDERS VALUES('O0008', '08-04-2021', 'C0007', 'P0013', '1')
INSERT INTO ORDERS VALUES('O0010', '08-09-2021', 'C0008', 'P0014', '1')
INSERT INTO ORDERS VALUES('O0009', '08-05-2021', 'C0004', 'P0006', '1')
INSERT INTO ORDERS VALUES('O0011', '08-12-2021', 'C0007', 'P0001', '1');


--TABLES COMPLETED 

-- INNER JOIN FOR TABLE PID, PDESC, CATEGORY, SNAME,SCITY
SELECT P.PID,P.PDESC,P.CATEGORY, S.SNAME,S.SCITY  
FROM PRODUCT P
INNER JOIN SUPPLIER S
ON P.SID =S.SID;

--RMAINING VIEW OF MORE THAN 2 TABLE, PROCEDURE WITH AUTO GENTRATE ID, TRANSICTION AND STOCVK TRIGGER

--IN THE INVENTORY STRUCTURE GENERATE A VIEW BILL. IT SHOULD DISPLAY OID,ODATE,CNAME,ADDRESS,PHONE,PDESC, PRICE, OQTY, AMOUNT
-- HAR MARJ KI DAVA--
DROP TABLE CUST;
DROP TABLE SUPPLIER;
DROP TABLE PRODUCT;
DROP TABLE ORDERS;

--LAST RESORT
USE MASTER;

DROP DATABASE INVENTORY;

SELECT*FROM SUPPLIER;
SELECT*FROM CUST;
SELECT*FROM PRODUCT;
SELECT*FROM ORDERS;

